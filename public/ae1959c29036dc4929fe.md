---
title: 理解しやすいコードの書き方～理解容易性の7つの観点～
tags:
  - プログラミング
  - 初心者
  - コードレビュー
  - 保守性
  - 理解容易性
private: false
updated_at: '2025-03-14T12:04:14+09:00'
id: ae1959c29036dc4929fe
organization_url_name: works-hi
slide: false
ignorePublish: false
---
# はじめに

「**理解容易性**」は「**保守性**」の観点の1つとして重視され、多くの**原則**や**技法**が紹介されているが、**断片的**かつ**多様**であり、**全体像**を理解することは難しい。

**抽象度は高い**が、**体系的**に観点を整理する事で、その理解の助けとなれば幸いである。

# 定義

「**理解容易性**」を簡単に言えば、「**理解のしやすさ**」であるが、その意味から掘り下げると、「**思考する量**」と言い換えることができる。

本記事では理解容易性を「**思考量の少なさ**」と定義し、7つの観点に整理した。

先に**要約**および**チェックリスト**を記載し、概略を記載した。
後に**詳細**で理解のため、各観点毎の**説明**と個別の**原則**や**技法**へのリンクを記載した。

# 要約

7つの観点の要約を先に示す。

1. （変数や関数の）名称は**分かりやすく**する
1. （変数や関数の）役割は**１つ**にする
1. （変数や関数の）参照は**狭く**する
1. （変数や関数の）状態は**変えられなく**する
1. （関数やクラスの）面積は**小さく**する
1. （関数やクラスの）階層は**浅く**する
1. （関数やクラスの）秩序は**整え**る

# チェックリスト

質問の形に変え、一部を詳細化した。

1. （変数や関数の）名称は**分かりやすいか？**
1. （変数や関数の）役割は**複数ないか？**
1. （変数や関数の）参照は**広くないか？**
    1. 色々な所**から**参照されてないか？
    1. 色々な所**を**参照してないか？
1. （変数や関数の）状態は**変えられないか？**
1. （関数やクラスの）面積は**大きくないか？**
    1. 縦の**行数**は長くないか？
    1. 横の**文字数**は多くないか？
1. （関数やクラスの）階層は**深くないか？**
1. （関数やクラスの）秩序は**整っているか？**

実装を終えたタイミングで確認してみて下さい。

# 詳細

## 前提

整理の為、観点を2つに大分した。

- **識別子（Identifier）**
  - 変数や関数などを他と区別するための名称や記号
- **区画（Block）**
  - 関数やクラスなど、コードのまとまり

## 識別子（Identifier）

### 名称：曖昧 -> 明瞭

識別子の名称は、曖昧ではなく、明瞭とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/768f14fd-e369-3818-1871-2af61ecce420.png)

曖昧である場合、確認範囲が広くなるため、思考量が増えてしまう。

- **命名規則の準拠**
  - リポジトリで採用された命名規則に準拠する
  - 規則に準拠しない場合、規則の理解に時間を要する
  ref. [命名規則について](https://qiita.com/elu_jaune/items/aa429a210310d3a0c952)
- **適切な英語の使用**
  - プログラムで一般的に使われる英語を使用する
  - 独自な英語表現の場合、意図の理解に時間を要する
  ref. [Qiita: プログラミングでよく使う英単語のまとめ](https://qiita.com/Ted-HM/items/7dde25dcffae4cdc7923)
- **省略名の不使用**
  - 名称は省略せず記載する
  - 経験や文化に依存した名称の場合、意図の理解に時間を要する
  ref. [Qiita: 変数名を冗長にしたら変数名で悩まなくなった](https://qiita.com/ikuo0/items/891bef2220c4a92def50)
- **マジックナンバーの不使用**
  - 意味を持った値には適切な名称をつける
  - 無名である場合、その値の理解に時間を要する
  ref. [Wikipedia: マジックナンバー (プログラム)](https://ja.wikipedia.org/wiki/%E3%83%9E%E3%82%B8%E3%83%83%E3%82%AF%E3%83%8A%E3%83%B3%E3%83%90%E3%83%BC_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0))
- **説明変数/関数の利用**
  - 自明ではない値の場合、変数や関数を定義し、名称を付ける
  - 無名である場合、その値の理解に時間を要する
  ref. [Qiita: 説明変数(要約変数)のメリット・デメリットと、発展例(メソッドの抽出)](https://qiita.com/tooda/items/4e740295a82b626d6cd3)
- **列挙型の利用**
  - 定数をグループ化し、用途を明確にする
  - グループ化しない場合、用途の確認に時間を要する
  ref. [Qiita: 列挙型（enum）の基本的な使い方とコード例](https://qiita.com/igm50/items/8c9788d4ba5868642c69)
- **驚き最小の原則に準拠**
  - 名称と内容を一致させる
  - 不一致である場合には、内容を読むことを強制する
  ref. [Wikipedia: 驚き最小の原則](https://ja.wikipedia.org/wiki/%E9%A9%9A%E3%81%8D%E6%9C%80%E5%B0%8F%E3%81%AE%E5%8E%9F%E5%89%87)
- **アノテーションコメントの利用**
  - 意図を表現しきれない時はコメントで残すが、コメントの意味も明示する
  - コメントがない場合、その意図の理解に時間を要する
  ref. [Qiita: アノテーションコメント](https://qiita.com/its532/items/fd82d19bb0ecf1d5a454)

### 役割：複数 -> 単一

識別子の役割は、複数ではなく、単一とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/6db03fbd-4a04-7147-1b43-accd30701ca3.png)

複数である場合、複雑性への対処のため、思考量が増えてしまう。

- **単一責任の原則に準拠（SOLIDの1つ）**
  - 識別子が持つ責務は１つにする
  - 複数ある場合、意図の理解に時間を要する
  ref. [Wikipedia: SOLID.単一責任の原則](https://ja.wikipedia.org/wiki/SOLID#%E5%8D%98%E4%B8%80%E8%B2%AC%E4%BB%BB%E3%81%AE%E5%8E%9F%E5%89%87_(single-responsibility_principle))
- **モジュール分割**
  - 責務が複数ある場合、分割をする
  - 分割をしない場合、責務の理解に時間を要する
  ref. [Qiita:モジュールの分割](https://qiita.com/masatom86650860/items/d942aaf0d6a0411e7d05)
- **関心の分離**
  - 関心（役割）により、分割をする
  - 分割しない場合、複雑さへの対処に時間を要する
  ref. [Wikipedia: 関心の分離](https://ja.wikipedia.org/wiki/%E9%96%A2%E5%BF%83%E3%81%AE%E5%88%86%E9%9B%A2)
  ref. [Qiita: 関心の分離を意識した名前設計で巨大クラスを爆殺する](https://qiita.com/MinoDriven/items/37599172b2cd27c38a33)
- **値オブジェクトの利用**
  - 役割の分離方法として、値の特性ごとに分割する
  - 分割しない場合、複雑さへの対処に時間を要する 
  ref. [Zenn:【DDD入門】TypeScript × ドメイン駆動設計ハンズオン ‐ Chapter 08 値オブジェクト (Value Object)](https://zenn.dev/yamachan0625/books/ddd-hands-on/viewer/chapter8_value_object)
- **モジュールの凝集度**
  - 同じ役割で纏まるように、分割する
  - 纏まっていない場合、影響範囲の調査に時間を要する
   ref. [Qiita: 凝集度について](https://qiita.com/uesho/items/59845b4891e12dfb3def)
- **インターフェース分離の原則（SOLIDの1つ）**
  - 同じ役割ではないインタフェースは分割する
  - 分割しない場合、不要な部分が増え、理解に時間を要する
  ref. [Qiita: 【SOLID】インターフェース分離の原則を完全に理解したい](https://qiita.com/k2491p/items/7b4e56789964ac6328b3)
- **コマンド・クエリ分離の原則**
  - コマンドとクエリは別の関数に分割する
  - 分割しない場合、複雑性の理解に時間を要する
  ref. [コマンド・クエリという考え方](https://qiita.com/pakkun/items/7dc5a9b6bc57225a3673)

### 状態：可変 -> 不変

識別子の状態は、可変ではなく、不変とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/5e30271f-9f94-84b6-4613-459da851ad01.png)

可変である場合、確認範囲が広くなるため、思考量が増えてしまう。

- **定数の利用**
  - 変更されない値は変更できないようにする
  - 変更できる場合、変更された可能性の確認に時間を要する
  - 言語によっては`const`だけでなく、`readonly`なども利用可能である
  ref. [Wikipedia: 定数 (プログラミング)](https://ja.wikipedia.org/wiki/%E5%AE%9A%E6%95%B0_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0))
- **不変オブジェクトの利用**
  - オブジェクトが持つ値を変更できないようする
  - 変更できる場合、変更された可能性の確認に時間を要する
  ref. [Qiita: 不変オブジェクトって何？【作り方も解説】](https://qiita.com/abcaaa/items/d2222e4a9afee554a2c7)
- **値オブジェクトの利用**
  - 不変オブジェクト化する際に関連する機能群を集約する
  - 集約しない場合、不変オブジェクトの扱いに多くの時間を要する
  ref. [Zenn:【DDD入門】TypeScript × ドメイン駆動設計ハンズオン ‐ Chapter 08 値オブジェクト (Value Object)](https://zenn.dev/yamachan0625/books/ddd-hands-on/viewer/chapter8_value_object)
- **継承の禁止**
  - 必要のないクラスの継承を禁止する
  - 禁止しない場合、変更時の影響確認に時間を要する
  ref. [Qiita: 【Java】final修飾子 ( 定数化・継承禁止、オーバーライド禁止 )-クラスにつける](https://qiita.com/takahirocook/items/5e0916d9bf28bcf68d0c#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%91%E3%82%8B)
- **オーバーライドの禁止**
  - 必要のないオーバーライドを禁止する
  - 禁止しない場合、呼び出し内容の確認に時間を要する
  ref. [Qiita: 【Java】final修飾子 ( 定数化・継承禁止、オーバーライド禁止 )-メソッドにつける-オーバーライド](https://qiita.com/takahirocook/items/5e0916d9bf28bcf68d0c#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AB%E3%81%A4%E3%81%91%E3%82%8B-%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89)

### 参照：広域 -> 局所

識別子の参照は、広域ではなく、局所とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/f0a8ab71-bdb3-b485-fb1e-6553a1a8e72a.png)

広域である場合、確認範囲が広くなるため、思考量が増えてしまう。

- **モジュールの疎結度**
  - モジュール間の結合度は低くする
  - 低くない場合、影響範囲の確認に時間を要する
  ref. [Qiita: 結合度について](https://qiita.com/uesho/items/59c99ccd712a591883d2)
- **値のスコープを狭くする**
  - グローバル、フィールド、ローカルとできるだけ狭くする
  - 狭くない場合、影響範囲の確認に時間を要する
  ref. [Qiita: 良いコードの書き方-変数のスコープを小さくする](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#star5%E5%A4%89%E6%95%B0%E3%81%AE%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E3%82%92%E5%B0%8F%E3%81%95%E3%81%8F%E3%81%99%E3%82%8B)

#### 参照

- **純粋関数への転換**
  - 外部との副作用を持たない関数やクラスに転換する
    - ex. グローバルや環境変数を直接参照せず、引数として受け取る
  - 転換しない場合、参照先の確認に時間を要する
  ref. [Qiita: 純粋関数](https://qiita.com/oedkty/items/f5fb807390a87359da0f)

#### 被参照

- **データ隠蔽**
  - クラスが持つフィールドなどを直接参照させない
  - 参照できる場合、影響範囲の確認に時間を要する
  ref. [Qiita:データ隠蔽・情報隠蔽とは-データ隠蔽](https://qiita.com/fukuYm/items/bf13a26a68a938267463#%E3%83%87%E3%83%BC%E3%82%BF%E9%9A%A0%E8%94%BD)
- **情報隠蔽**
  - 値を公開せず、必要な処理のみを公開する
  - 値を公開した場合、影響範囲の確認に時間を要する
  ref. [Zenn:ドメイン知識が漏れるとは何なのか](https://zenn.dev/praha/articles/92c6494570a4dc)

## 区画（Block）

### 面積：広大 -> 狭小

区画の面積は、広大ではなく、狭小とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/6a1df0fc-9734-946e-f836-768767c5866f.png)

広大である場合、確認範囲が広くなるため、思考量が増えてしまう。

- **重複の除去（DRY原則）**
  - 同じ意味で重複したものは1つにする
  - 重複した場合、変更時の対応に時間を要する
  ref. [Wikipedia: Don't repeat yourself](https://ja.wikipedia.org/wiki/Don%27t_repeat_yourself)
- **関数の抽出**
  - まとまりごとに関数として抽出する
  - 抽出しない場合、確認する量の多さに時間を要する
  ref. [Qiita: リファクタリング入門-関数の抽出](https://qiita.com/Jazuma/items/f6a134f964747399d864#%E9%96%A2%E6%95%B0%E3%81%AE%E6%8A%BD%E5%87%BA)

#### 縦：行数

主処理部分の行数は5～10行程度、全体としても20行程度に収める。

- **デッドコードの除去**
  - 利用されることのなくなった、できないコードは削除する
  - 削除しない場合、別の人も同じ確認に時間を要する
  ref. [Qiita: CleanCode読書メモ-デッドコード](https://qiita.com/opengl-8080/items/c44814564cd216e50656#g9%E3%83%87%E3%83%83%E3%83%89%E3%82%B3%E3%83%BC%E3%83%89-p379)
- **不使用コードの除去（YAGNI）**
  - 現時点で使わないコードは記述しない
  - 記述した場合、意味のないコードの確認に時間を要する
  ref. [Wikipedia: YAGNI(You ain't gonna need it)](https://ja.wikipedia.org/wiki/YAGNI)
- **nullの不使用**
  - 必要な時以外はnullを利用しない
  - 利用した場合、nullを考慮した実装の冗長さにより多くの時間を要する
  ref. [Javaでnullを安全に扱う − Optionalの使い方](https://blog.isystk.com/system_develop/backend/java/706/)
- **値オブジェクトの利用**
  - 直接値を利用せず、値オブジェクトにする
  - 値オブジェクトにしない場合、値の判定や関連処理の冗長さにより多くの時間を要する
  ref. [Zenn:【DDD入門】TypeScript × ドメイン駆動設計ハンズオン ‐ Chapter 08 値オブジェクト (Value Object)](https://zenn.dev/yamachan0625/books/ddd-hands-on/viewer/chapter8_value_object)
- **3項演算子の利用**
  - 複雑ではない場合、3項演算子を利用する
  - 利用しない場合、記述の冗長さにより多くの時間を要する
  ref. [Qiita: 三項演算子の適切な使い方（条件演算子）](https://qiita.com/smicle/items/7d3b9881834dc0142fb7)

##### コメント

- **退化コメントの除去**
  - 古くなったと分かったコメントは除外する
  - 除外しない場合、別の人も同様の確認に時間を要する
  ref. [Qiita: CleanCode読書メモ-退化コメント](https://qiita.com/opengl-8080/items/c44814564cd216e50656#c2%E9%80%80%E5%8C%96%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88-p372)
- **冗長コメントの除去**
  - 翻訳コメントなど意味のないコメントは除外する
  - 除外しない場合、情報密度が低くなり、把握に多くの時間を要する
  ref. [Qiita: CleanCode読書メモ-冗長コメント](https://qiita.com/opengl-8080/items/c44814564cd216e50656#c2%E9%80%80%E5%8C%96%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88-p372)
- **コメントアウトの除去**
  - バージョン管理で確認できる内容を残さない
  - 残した場合、情報密度が低くなり、把握に多くの時間を要する
  ref. [Qiita: CleanCode読書メモ-コメントアウトされたコード](https://qiita.com/opengl-8080/items/c44814564cd216e50656#c5%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%82%A2%E3%82%A6%E3%83%88%E3%81%95%E3%82%8C%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89-p373)

#### 横：字数

単純な行ではなく、一文として80字程度に収める。

- **パラメーターオブジェクトの利用**
  - 引数の数が多い場合、専用のオブジェクトを作成する
  - 作成しない場合、宣言部および利用箇所の記述の冗長さにより、把握に多くの時間を要する
  ref. [Hatena: パラメータオブジェクトの導入【リファクタリング】](https://tech-up.hatenablog.com/entry/2018/12/21/112407)
- **説明変数/関数の利用**
  - 冗長な条件判定は別途変数や関数に分割する
  - 分割しない場合、記述の冗長さにより、把握に多くの時間を要する
  ref. [Qiita: 説明変数(要約変数)のメリット・デメリットと、発展例(メソッドの抽出)](https://qiita.com/tooda/items/4e740295a82b626d6cd3)

### 階層：多層 -> 単層

区画の階層は、多層ではなく、単層とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/c3720162-6632-b8f5-31a8-3eeb5d299fd5.png)

多層である場合、複雑性への対処のため、思考量が増えてしまう。

- **早期リターン**
  - 主処理の必要性ない条件は先に`return`や`exit`させてしまう
  - させない場合、ネストの深さの理解に時間を要する
  - ガード節・アーリーリターンとも呼ばれる
  - 類型として、アーリー・コンティニュー もある
  ref. [Zenn: 早期リターンを書こう](https://zenn.dev/media_engine/articles/early_return)
- **関数の抽出**
  - ネスト内の処理が多く、更にネストしている場合、別関数に分割する
  - 分解しない場合、冗長さや複雑さの理解に時間を要する
  ref. [Qiita: 良いコードの書き方 > ロジックの切り出し](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%81%AE%E5%88%87%E3%82%8A%E5%87%BA%E3%81%97)
- **配列・リスト操作関数への転換**
  - ネスト自体を必要としない記述方式に転換する
  - 転換しない場合、複雑さの理解に時間を要する
  ref.[Qiita: 深いネストを減らすには？-LINQ を使う](https://qiita.com/nskydiving/items/1076c411b002b0a3aec9#linq-%E3%82%92%E4%BD%BF%E3%81%86) 

### 秩序：雑然 -> 整然

区画の秩序は、雑然ではなく、整然とする。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/58677/fb567352-2b6e-d265-8ab2-a61544996fc4.png)

雑然としている場合、複雑性への対処のため、思考量が増えてしまう。

- **簡潔に単純にする（KISS）**
  - おおよそ簡潔かつ単純にする
  - 簡潔かつ単純ではない場合、理解に時間を要する
  ref. [Wikipedia: KISS(Keep it simple stupid)の原則](https://ja.wikipedia.org/wiki/KISS%E3%81%AE%E5%8E%9F%E5%89%87)
- **コーディングスタイルの準拠**
  - リポジトリルールがある場合はそれに準拠する
  - 準拠しない場合、ルールの理解に時間を要する
  ref. [Google Style Guides](https://google.github.io/styleguide/)
- **段落分け**
  - 意図の纏まりごとに段落を分ける
  - 分けない場合、意図の理解に時間を要する
  ref. [【リーダブルコード】良いコードを書くための原則【入門編】 > 5コードを段落に分ける](https://zenn.dev/hinoshin/articles/80391c94a0b1a7#5%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%AE%B5%E8%90%BD%E3%81%AB%E5%88%86%E3%81%91%E3%82%8B)
- **関数の抽出**
  - 意図の纏まりの数が多い場合、それぞれを別の関数に分割する
  - 分割しない場合、内容の理解に時間を要する
  ref. [Qiita: 良いコードの書き方 > ロジックの切り出し](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%81%AE%E5%88%87%E3%82%8A%E5%87%BA%E3%81%97)
- **高凝集化**
  - 意図が同じ内容を同じところに纏める
  - 纏めない場合、関連する箇所の把握に時間を要する
  ref. [Qiita: 凝集度について](https://qiita.com/uesho/items/59845b4891e12dfb3def)
- **カプセル化**
  - データとロジックを同じところに纏める
  - 纏めない場合、関連する箇所の把握に時間を要する
  ref. [Wikipedia: カプセル化](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%97%E3%82%BB%E3%83%AB%E5%8C%96)
- **対称性**
  - 大きな意図が同じ名称やブロックでは、対称性や相似性を高くする
  - 低い場合、大きな意図が同じである事の理解に時間を要する
  ref. [Qiita: コードレビューに使える「7つの設計原則」 > 3. 対称原理](https://qiita.com/tkparasol/items/e57065d04b2a236a3b49#3-%E5%AF%BE%E7%A7%B0%E5%8E%9F%E7%90%86)
- **インフラ・ドメインの分離**
  - ドメインとインフラ層のコードを混ぜない
  - 混ぜた場合、複雑さの理解に時間を要する
  ref. [HP: 私がコピペしたいからドメイン層とインフラストラクチャ層を分離してくれ](https://blog.rhyztech.net/separate_domain_and_infrastructure_layer/)
- **粒度の統一**
  - ロジック内の粒度は統一して記載する
  - バラバラの場合、複雑さの理解に時間を要する
  ref. [Hatena: 脱・読みづらいコード！今日から一段上のプログラマーになる方法 5 選 > 2. 粒度を揃える](https://xin9le.hatenablog.jp/entry/2016/02/26/043557)

# 終わりに

分かり辛い点が多いですが、良いコーディングの参考になれば幸いです。

# 参考

## 書籍

- [Tidy First?](https://www.oreilly.co.jp/books/9784814400911/)
- [リーダブルコード](https://www.oreilly.co.jp/books/9784873115658/)
- [リファクタリング  既存のコードを安全に改善する（第2版）](https://amzn.asia/d/0i5mCDRK)
- [良いコード／悪いコードで学ぶ設計入門―保守しやすい　成長し続けるコードの書き方](https://amzn.asia/d/0abFsGMC)
- [Clean Architecture　達人に学ぶソフトウェアの構造と設計 (アスキードワンゴ)](https://amzn.asia/d/0dvxNtcV)
- [エリック・エヴァンスのドメイン駆動設計](https://amzn.asia/d/048OK6GM)
- [脳に収まるコードの書き方 ―複雑さを避け持続可能にするための経験則とテクニック](https://www.oreilly.co.jp/books/9784814400799/)

 ## 記事

- [Qiita: 良いコードの書き方](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996)
- [Qiita: コードレビューに使える「7つの設計原則」](https://qiita.com/tkparasol/items/e57065d04b2a236a3b49)
- [Qiita: 新人プログラマ アンチパターン：原理原則多すぎて脳みそOOMエラー](https://qiita.com/_mi/items/d008267d2e181bc7ba25)
